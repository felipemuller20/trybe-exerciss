<!DOCTYPE html>
<html>
   <head>
      <title>Redux basic example</title>
      <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
   </head>
   <body>
      <div>
        Clicked: <span id="value">0</span> times
        <button id="increment">+</button>
        <button id="decrement">-</button>
        <button id="increment-10">Adiciona 10</button>
        <input type='number'id="increment-quantity" placeholder="Digite a quantidade do incremento">
        <input type='number' id='decrement-quantity' placeholder="Digite o decremento">
        Número de cliques: <span id='clickCounter'>X</span>
        Valored adicionados: <span id="addedValues">X</span>
      </div>
      <script>

        const INCREMENT = 'INCREMENT';
        const DECREMENT = 'DECREMENT';

        const INITIAL_STATE = {
          contador: 0,
          incrementValue: 0,
          decrementValue: 0,
          clickCounts: 0,
          addedValues: [],
        };
        // o reducer é uma função que retorna o novo valor do meu estado global
        // a partir de uma action

        function counterReducer(state = INITIAL_STATE, action) {
          switch(action.type) {
            case INCREMENT: 
              // state = state + 1 ❌
              return {...state, contador: state.contador + action.payload.amount};
            case DECREMENT: 
              return {...state, contador: state.contador - action.payload.amount};
            default:
              return state;
          }
        }

        // Criar a store passando o counterReducer
        const store = Redux.createStore(
          counterReducer,
          window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
        );

        document
          .querySelector('#increment')
          .addEventListener('click', () => {
            const incrementAction = {
              type: 'INCREMENT',
              payload: {
                amount: 1,
              }
            }

            store.dispatch(incrementAction);
          })
        
        document
          .querySelector('#decrement')
          .addEventListener('click', () => {
            const decrementAction = {
              type: 'DECREMENT',
              payload: {
                amount: 1,
              }
            }

            store.dispatch(decrementAction);
          })

        document
          .querySelector('#increment-10')
          .addEventListener('click', () => {
            const increment10Action = {
              type: 'INCREMENT',
              payload: {
                amount: 10
              }
            }

            store.dispatch(increment10Action);
          })

        // pede os dados e atualiza a página
        store.subscribe(() => {
          document.querySelector('#value').innerHTML = store.getState().contador;
        });
      </script>
   </body>
</html>